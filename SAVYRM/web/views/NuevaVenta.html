<div ng-init="getProductosParaVenta()">
    <div class="col-md-12">
        <div class="page-content-wrapper">
            <div class="page-content">
                <div class="row">
                    <div class="col-md-12">
                        <!-- Productos para comprar-->
                        <div class="portlet box grey-cascade">
                            <div class="portlet-body">
                                <table class="table table-striped table-bordered table-hover" id="productosParaVenta">
                                    <thead>
                                        <tr>
                                            <th style="text-align: center;">Producto</th>
                                            <th style="text-align: center;">Disponibles</th>
                                            <th style="text-align: center;">Vencimiento</th>
                                            <th style="text-align: center;">Precio unidad</th>
                                            <th style="text-align: center;">Agregar</th>
                                        </tr>
                                    </thead>
                                    <tbody ng-repeat="productoParaVenta in productosParaVenta">
                                        <tr class="odd gradeX">
                                            <td>{{productoParaVenta.nombreProducto}}</td>
                                            <td>{{productoParaVenta.cantidadProductoSeccion}} {{productoParaVenta.abreviacion}}</td>
                                            <td>{{productoParaVenta.fechaIngreso}}</td>
                                            <td>S/ {{productoParaVenta.unitarioPrecio}}</td>
                                            <td style="text-align: center;">
                                                <div class="btn-group btn-group-xs btn-group-solid">
                                                    <button class="btn btn-warning" data-toggle="modal" data-target="#myModal" value="{{productoParaVenta}}" data-ng-click="EstablecerCantidadParaAgregar($event)">Agregar al carrito</button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table> 
                            </div>
                        </div>
                        <!-- Fin Productos para comprar-->
                        
                        <!-- Carrito de compras-->
                        <div class="portlet box grey-cascade">
                            <h4>Carrito de compras</h4>
                            <div class="portlet-body">
                                <table class="table table-striped table-bordered table-hover" id="productosParaVenta">
                                    <thead>
                                        <tr>
                                            <th style="text-align: center;">Eliminar</th>
                                            <th style="text-align: center;">Producto</th>
                                            <th style="text-align: center;">CÃ³digo</th>
                                            <th style="text-align: center;">Cantidad</th>
                                            <th style="text-align: center;">Precio unidad</th>
                                            <th style="text-align: center;">Precio Total</th>
                                        </tr>
                                    </thead>
                                    <tbody ng-repeat="elemento in carrito">
                                        <tr class="odd gradeX">
                                            <td style="text-align: center;">
                                                <div class="btn-group btn-group-xs btn-group-solid">
                                                    <button class="btn btn-danger" value="{{elemento}}">Retirar</button>
                                                </div>
                                            </td>
                                            <td>{{elemento.nombreProducto}}</td>
                                            <td>{{elemento.codigoProducto}}</td>
                                            <td>{{elemento.cantidad}} {{elemento.unidadMedida}}</td>
                                            <td>{{elemento.precioUnitario}}</td>
                                            <td>{{elemento.precioTotalProducto}}</td>
                                        </tr>
                                    </tbody>
                                    <tr class="odd gradeX info">
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td>PRECIO TOTAL</td>
                                            <td>{{PrecioTotal}}</td>
                                        </tr>
                                </table> 
                            </div>
                            <button type="button" class="col-md-2 col-md-offset-10 btn btn-success" data-toggle="modal" data-target="#NuevoProductoModal">
                                    <span class="glyphicon glyphicon-plus-sign" aria-hidden="true" ng-click="registrarVenta()"> Procesar venta</span>
                                </button>
                        </div>
                        <!-- Fin carrito de compras -->
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Pop up Cantidad a agregarACarrito -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title">Modal title</h4>
            </div>
              
            <div class="modal-body">                
                <div class="form-group">
                    <label>Cantidad a agregar:</label>
                    <input type="number" class="form-control"  ng-model="CantidadProductoParaAgregar" ng-change="CalcularPrecio()">
                </div>
                <div class="form-group">
                    <label>Unidad de medida</label>
                    <input type="text" class="form-control"  ng-model="UnidadMedidaProductoParaAgregar" >
                </div>
                <div class="form-group">
                    <label>Precio calculado</label>
                    <input type="text" class="form-control"  ng-model="PrecioDelProductoParaAgregar">
                </div>
                
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
              <button type="button" class="btn btn-primary" data-dismiss="modal" value="{{ProductoParaAgregar}}" data-ng-click="AgregarACarrito($event)">Agregar</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    
</div>
